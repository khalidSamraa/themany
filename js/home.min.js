/*
 * Mistress Theme v1.0
 * Copyright (c) 2015 Mistress 
 * Author: Mistress
 * Author URI: http://mistress.agency
 */
jQuery(document).ready(function(a){'use strict';function b(){var b=a('.slide.active').data('href');setTimeout(function(){window.open(b,'_self',!1)},50)}function c(){1!==a('.interstitial.remove').length||1!==a('.interstitial').length?setTimeout(function(){c()},20):(r=!0,d())}function d(){if(!1===r)return!1;1!==a('.slide').length&&f(),u=setTimeout(function(){i(),e(),f(),d()},s)}function e(){a('.slide.active').attr('data-duration')?(s=1e3*a('.slide.active').data('duration'),t=s):(s=q,t=s-660)}function f(){a('.progress-bar .rainbow-loader').remove(),a('.progress-bar .rainbow-loader').css({right:'-500%'}),a('.progress-bar').html('<span class="rainbow-loader"></span>'),setTimeout(function(){a('.progress-bar .rainbow-loader').css({right:'100%'})},50),setTimeout(function(){a('.progress-bar .rainbow-loader').css({right:'100%'})},t-1e3)}function g(){if(a('.slide.active video').length){var b=document.querySelector('.slide.active video');setTimeout(function(){b.pause()},500)}}function h(){a('.slide.active video').length&&(document.querySelector('.slide.active video').currentTime=0,document.querySelector('.slide.active video').play())}function i(){var b=a('.pagination span').length-1,c=a('.pagination span.active').index(),d=c+1;a('.pagination .active').removeClass('active'),c+1>b?(a('.pagination span:eq(0)').addClass('active'),a('.active .fixed-text').animate({opacity:'0'},450,'easeInQuad',function(){a(this).hide()}),g(),a('.slide.active').removeClass('active'),a('.slider-parent .slide:eq(0)').addClass('active'),h(),a('.active .fixed-text').show().animate({opacity:'1'},650,'easeOutQuad')):(a('.pagination span:eq('+d+')').addClass('active'),a('.active .fixed-text').animate({opacity:'0'},450,'easeInQuad',function(){a(this).hide()}),g(),a('.slide.active').removeClass('active'),a('.slider-parent .slide:eq('+d+')').addClass('active'),h(),a('.active .fixed-text').show().animate({opacity:'1'},650,'easeOutQuad'))}function j(){var b=a('.pagination span').length-1,c=a('.pagination span.active').index(),d=c-1;a('.pagination .active').removeClass('active'),f(),0===c?(a('.pagination span:eq('+b+')').addClass('active'),a('.active .fixed-text').animate({opacity:'0'},450,'easeInQuad',function(){a(this).hide()}),g(),a('.slide.active').removeClass('active'),a('.slider-parent .slide:eq('+b+')').addClass('active'),h(),a('.active .fixed-text').show().animate({opacity:'1'},650,'easeOutQuad')):(a('.pagination span:eq('+d+')').addClass('active'),a('.active .fixed-text').animate({opacity:'0'},450,'easeInQuad',function(){a(this).hide()}),g(),a('.slide.active').removeClass('active'),a('.slider-parent .slide:eq('+d+')').addClass('active'),h(),a('.active .fixed-text').show().animate({opacity:'1'},650,'easeOutQuad'))}function k(a,b,c){ga('send','event',a,b,c)}function l(){if(1===a('.slide').length)return!1;if(!p){var b='<nav class="pagination">';a.each(o,function(a,c){0===a?b+='<span class="active"></span>':0!==a&&(b+='<span></span>')}),b+='</nav>',a('.slider-parent').prepend(b)}}function m(b){a(b).each(function(){if(n(this)){a(this).addClass('in-view')}})}function n(b){var c=a(window).scrollTop()+a(window).height();return a(b).offset().top+a(window).height()/2<c}var o=a('.slide'),p=a('html').hasClass('ie-9'),q=(a(window).width(),3660),r=!1,s=q,t=s-660;setTimeout(function(){a(window).width()>=768&&a('body.home').addClass('scroll-snap')},100),a(window).on('load',function(){a('.slide:first').addClass('active'),e(),a('.active .fixed-text').animate({opacity:'1'},650,'easeOutQuad')}),a('section.slide, .fixed-text .btn').on('click',function(a){a.preventDefault(),b()}),a(window).on('load',function(){1===a('.slide').length?a('.progress-bar .color-bar').animate({width:'100%'},5e3,'easeInOutQuad'):d()}),c();var u;a(document).on('swiperight','.slider-parent',function(){if(a('.fixed-text').is(':animated')||1===a('.slide').length)return!1;i(),clearTimeout(u),k('HP Carousel','Swipe Right','User Interaction')}),a(document).keyup(function(b){if(39===b.which||1===a('.slide').length){if(a('.fixed-text').is(':animated'))return!1;i(),clearTimeout(u),setTimeout(function(){d()},600),k('HP Carousel','Key Nav Right','User Interaction')}}),a(document).on('swipeleft','.slider-parent',function(){if(a('.fixed-text').is(':animated')||1===a('.slide').length)return!1;j(),clearTimeout(u),k('HP Carousel','Swipe Left','User Interaction')}),a(document).keyup(function(b){if(37===b.which){if(a('.fixed-text').is(':animated')||1===a('.slide').length)return!1;j(),clearTimeout(u),setTimeout(function(){d()},600),k('HP Carousel','Key Nav Left','User Interaction')}}),a(document).on('click','.pagination span',function(){if(f(),clearTimeout(u),setTimeout(function(){d()},600),a(this).hasClass('active')||1===a('slide').length)return!1;var b=a(this).index();a('.pagination .active').removeClass('active'),a(this).addClass('active'),a('.active .fixed-text').animate({opacity:'0'},450,'easeInQuad',function(){a(this).hide()}),g(),a('.slide.active').removeClass('active'),a('.slider-parent .slide:eq('+b+')').addClass('active'),h(),a('.active .fixed-text').show().animate({opacity:'1'},650,'easeOutQuad'),k('HP Carousel','Pagination Clicked','User Interaction')}),a('.slider-parent .slide-right').on('click',function(){if(a('.fixed-text').is(':animated')||1===a('.slide').length)return!1;a('.slide.active .slide-image').animate({marginLeft:'0%'},250),i(),clearTimeout(u),setTimeout(function(){d()},600),k('HP Carousel','Next Slide Nav','User Interaction')}),a('.slider-parent .slide-left').on('click',function(){if(a('.fixed-text').is(':animated')||1===a('.slide').length)return!1;a('.slide.active .slide-image').animate({marginLeft:'0%'},250),j(),clearTimeout(u),setTimeout(function(){d()},600),k('HP Carousel','Previous SLide Nav','User Interaction')}),1===a('.slide').length&&(a('.slide-right').remove(),a('.slide-left').remove()),l(),p&&a.each(a('.work-item'),function(b,c){a(this).removeClass('animate-fade-up'),a(this).css('margin','0 0 10px 0')});var v=a('.fade');v.css('opacity',0),a(window).scroll(function(){if(a(window).width()>768){var b=a(document).scrollTop()/590;v.css('opacity',b)}else v.css('opacity',0)}),a(window).width()>768&&a('.slide').each(function(){var b=a(this).index()-4,c=a('.slide').length-1,d='';d=b===c?a('.slide:eq(0) .desktop-slide-image').clone():a('.slide:eq('+(b+1)+') .desktop-slide-image').clone();var e='';e=0===b?a('.slide:eq('+c+') .desktop-slide-image').clone():a('.slide:eq('+(b-1)+') .desktop-slide-image').clone(),d.removeClass('desktop-slide-image'),e.removeClass('desktop-slide-image'),a(this).find('.preview-left').html(e),a(this).find('.preview-right').html(d)}),a(window).scroll(function(){m('.snap-point')}),a('.slide.active .fixed-text .btn').hover(function(){a(this).addClass('hover')},function(){a(this).removeClass('hover')}),a(window).on('load resize',function(){if(a(window).width()>1024){var b=a('.brand-manifesto .content:eq(0)').height();a('.brand-manifesto .content:eq(1)').css('height',b)}else a('.brand-manifesto .content:eq(1)').css('height','')})});